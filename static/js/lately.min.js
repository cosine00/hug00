/**
 * Lately.min.js 2.5.2
 * MIT License - http://www.opensource.org/licenses/mit-license.php
 * https://tokinx.github.io/lately/
 */
 !function() {
    window.Lately = new function() {
        var t = this;
        this.lang = {
            second: "秒", minute: "分钟", hour: "小时", day: "天", 
            month: "个月", year: "年", ago: "前", error: "NaN"
        };
        
        var e = function(e) {
            e = new Date(n(e));
            var now = new Date();
            var diffDays = (now - e) / (1000 * 60 * 60 * 24); // 计算天数差
            
            // 超过7天则返回补零的绝对时间（2025/05/01 17:05）
            if (diffDays > 7) {
             const year = e.getFullYear();
             const month = String(e.getMonth() + 1).padStart(2, '0'); // 月份补零
             const day = String(e.getDate()).padStart(2, '0');        // 日期补零
             const hours = String(e.getHours()).padStart(2, '0');     // 小时补零
             const minutes = String(e.getMinutes()).padStart(2, '0');  // 分钟补零
            return `${year}/${month}/${day} ${hours}:${minutes}`;     // 目标格式
           }
            
            // 否则返回相对时间（原有逻辑）
            var r = new function() {
                this.second = (now - e) / 1000,
                this.minute = this.second / 60,
                this.hour = this.minute / 60,
                this.day = this.hour / 24,
                this.month = this.day / 30,
                this.year = this.month / 12
            };
            var i = Object.keys(r).reverse().find(function(t) { return r[t] >= 1; });
            return (i ? function(t, e) { return Math.floor(t) + e; }(r[i], t.lang[i]) : t.lang.error) + t.lang.ago;
        };
        
        var n = function(t) {
            t = new Date(t && ("number" == typeof t ? t : t.replace(/-/g, "/").replace("T", " ")));
            return !isNaN(t.getTime()) && t.getTime();
        };
        
        return {
            init: function() {
                var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                    i = r.target,
                    a = void 0 === i ? "time" : i,
                    o = r.lang;
                o && (t.lang = o);
                var u = !0, h = !1, l = void 0;
                try {
                    for (var s, c = document.querySelectorAll(a)[Symbol.iterator](); !(u = (s = c.next()).done); u = !0) {
                        var f = s.value,
                            g = n(f.dateTime) || n(f.title) || n(f.innerHTML) || 0;
                        if (!g) return;
                        f.title = new Date(g).toLocaleString();
                        f.innerHTML = e(g); // 调用修改后的格式化函数
                    }
                } catch (t) {
                    h = !0, l = t;
                } finally {
                    try { !u && c.return && c.return(); } 
                    finally { if (h) throw l; }
                }
            },
            format: e
        };
    }();
}();